<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Looping Sad Piano Song</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.min.js"></script>
<style>
body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
button { font-size: 18px; padding: 10px 20px; cursor: pointer; }
</style>
</head>
<body>

<h1>Looping Sad Piano</h1>
<button id="playBtn">Play / Resume</button>

<script>
// Piano sampler
const piano = new Tone.Sampler({
    urls: {
        "A2":"A2.mp3","A3":"A3.mp3","A4":"A4.mp3",
        "B2":"B2.mp3","B3":"B3.mp3","B4":"B4.mp3",
        "C3":"C3.mp3","C4":"C4.mp3","C5":"C5.mp3",
        "D3":"D3.mp3","D4":"D4.mp3","D5":"D5.mp3",
        "E3":"E3.mp3","E4":"E4.mp3","E5":"E5.mp3",
        "F3":"F3.mp3","F4":"F4.mp3","F5":"F5.mp3",
        "G3":"G3.mp3","G4":"G4.mp3","G5":"G5.mp3"
    },
    release: 1.5,
    baseUrl: "https://tonejs.github.io/audio/salamander/"
}).toDestination();

// Tempo
Tone.Transport.bpm.value = 140;

// Song notes (looping)
const songNotes = [
  {time:"0:0", notes:["A4","C5","E5"], duration:"8n"}, {time:"0:0", notes:["A3"], duration:"2n"},
  {time:"0:0.5", notes:["G4","B4","D5"], duration:"8n"}, {time:"0:0.5", notes:["F3"], duration:"2n"},
  {time:"0:1", notes:["A4","C5","E5"], duration:"8n"}, {time:"0:1", notes:["D3"], duration:"2n"},
  {time:"0:1.5", notes:["G4","B4","D5"], duration:"8n"}, {time:"0:1.5", notes:["E3"], duration:"2n"},

  {time:"1:0", notes:["A4","A4","G4","A4"], duration:"8n"}, {time:"1:0", notes:["A3"], duration:"2n"},
  {time:"1:0.5", notes:["F4","E4","D4"], duration:"8n"}, {time:"1:0.5", notes:["F3"], duration:"2n"},
  {time:"1:1", notes:["D4","E4","F4","G4"], duration:"8n"}, {time:"1:1", notes:["D3"], duration:"2n"},
  {time:"1:1.5", notes:["E4"], duration:"8n"}, {time:"1:1.5", notes:["E3"], duration:"2n"},

  {time:"2:0", notes:["F4","G4","A4","C5"], duration:"8n"}, {time:"2:0", notes:["F3"], duration:"2n"},
  {time:"2:0.5", notes:["C5","B4","A4"], duration:"8n"}, {time:"2:0.5", notes:["C3"], duration:"2n"},
  {time:"2:1", notes:["G4","F4","E4","G4"], duration:"8n"}, {time:"2:1", notes:["G3"], duration:"2n"},
  {time:"2:1.5", notes:["A4"], duration:"8n"}, {time:"2:1.5", notes:["A3"], duration:"2n"}
  // You can continue adding more notes here to match the full song
];

// Part for the song
const part = new Tone.Part((time, value) => {
    piano.triggerAttackRelease(value.notes, value.duration, time);
}, songNotes);

part.loop = true;        // LOOP the song
part.loopEnd = "4m";     // Length of loop (adjust to match your song length)
part.start(0);

// Play button
document.getElementById("playBtn").addEventListener("click", async () => {
    await Tone.start();
    Tone.Transport.start();
});
</script>

</body>
</html>
